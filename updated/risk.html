<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Prediction - BabyBloom AI</title>
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/risk.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <h1>Risk Prediction</h1>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Health Metrics Dashboard -->
            <section class="metrics-dashboard">
                <!-- Systolic Blood Pressure -->
                <div class="metric-card">
                    <div class="metric-header">
                        <h3>Systolic Blood Pressure</h3>
                        <button class="btn-add-small" onclick="openHealthModal('bloodPressureSys')">+ Add</button>
                    </div>
                    <div class="metric-value" id="bloodPressureSysCurrent">--</div>
                    <div class="metric-label">Current (mmHg)</div>
                    <div class="metric-average">
                        Avg: <span id="bloodPressureSysAvg">--</span> mmHg
                    </div>
                    <canvas id="bloodPressureSysChart"></canvas>
                    <div class="entry-list" id="bloodPressureSysList"></div>
                </div>

                <!-- Diastolic Blood Pressure -->
                <div class="metric-card">
                    <div class="metric-header">
                        <h3>Diastolic Blood Pressure</h3>
                        <button class="btn-add-small" onclick="openHealthModal('bloodPressureDia')">+ Add</button>
                    </div>
                    <div class="metric-value" id="bloodPressureDiaCurrent">--</div>
                    <div class="metric-label">Current (mmHg)</div>
                    <div class="metric-average">
                        Avg: <span id="bloodPressureDiaAvg">--</span> mmHg
                    </div>
                    <canvas id="bloodPressureDiaChart"></canvas>
                    <div class="entry-list" id="bloodPressureDiaList"></div>
                </div>

                <!-- Blood Sugar -->
                <div class="metric-card">
                    <div class="metric-header">
                        <h3>ü©∏ Blood Sugar</h3>
                        <button class="btn-add-small" onclick="openHealthModal('bloodSugar')">+ Add</button>
                    </div>
                    <div class="metric-value" id="bloodSugarCurrent">--/--</div>
                    <div class="metric-label">Current (mg/dL)</div>
                    <div class="metric-average">
                        Avg: <span id="bloodSugarAvg">--/--</span> mg/dL
                    </div>
                    <canvas id="bloodSugarChart"></canvas>
                    <div class="entry-list" id="bloodSugarList"></div>
                </div>

                <!-- Body Temperature -->
                <div class="metric-card">
                    <div class="metric-header">
                        <h3>üå°Ô∏è Body Temperature</h3>
                        <button class="btn-add-small" onclick="openHealthModal('bodyTemp')">+ Add</button>
                    </div>
                    <div class="metric-value" id="bodyTempCurrent">--</div>
                    <div class="metric-label">Current (¬∞C)</div>
                    <div class="metric-average">
                        Avg: <span id="bodyTempAvg">--</span> ¬∞C
                    </div>
                    <canvas id="bodyTempChart"></canvas>
                    <div class="entry-list" id="bodyTempList"></div>
                </div>

                 <!-- Heart Rate -->
                 <div class="metric-card">
                    <div class="metric-header">
                        <h3>‚ù§Ô∏è Heart Rate</h3>
                        <button class="btn-add-small" onclick="openHealthModal('heartRate')">+ Add</button>
                    </div>
                    <div class="metric-value" id="heartRateCurrent">--</div>
                    <div class="metric-label">Current (bpm)</div>
                    <div class="metric-average">
                        Avg: <span id="heartRateAvg">--</span> bpm
                    </div>
                    <canvas id="heartRateChart"></canvas>
                    <div class="entry-list" id="heartRateList"></div>
            </section>

            <!-- Combined Graph -->
            <section class="combined-graph card">
                <div class="section-header">
                    <h3>üìä Combined Health Metrics</h3>
                    <button class="btn-secondary" onclick="toggleDetailedView()">Show Detailed View</button>
                </div>
                <canvas id="combinedChart"></canvas>
            </section>

            <!-- Risk Assessment -->
            <section class="risk-assessment card">
                <h3>ü§ñ ML-Based Risk Assessment</h3>
                <button class="btn-primary" id="checkRiskBtn">Check Pregnancy Risk</button>
                <div class="risk-result" id="riskResult"></div>
            </section>
        </div>
    </main>

    <!-- Add Health Data Modal -->
    <div class="modal" id="healthModal">
        <div class="modal-content">
            <span class="close" id="closeHealthModal">&times;</span>
            <h2 id="modalTitle">Add Health Data</h2>
            <form id="healthDataForm">
                <input type="hidden" id="dataType">
                
                <div class="form-group">
                    <label for="dataDate">Date</label>
                    <input type="date" id="dataDate" required>
                </div>


                <!-- Systolic Pressure Fields -->
                <div class="form-group" id="systolicField" style="display: none;">
                    <label for="systolicValue">Systolic (mmHg)</label>
                    <input type="number" id="systolicValue" min="0" max="300" placeholder="e.g., 120">
                </div>

            

                <!-- Diastolic Pressure Fields -->
                <div class="form-group" id="diastolicField" style="display: none;">
                    <label for="diastolicValue">Diastolic (mmHg)</label>
                    <input type="number" id="diastolicValue" min="0" max="200" placeholder="e.g., 80">
                </div>

                   
                <!-- Blood Sugar Fields -->
                <div class="form-group" id="bloodSugarField" style="display: none;">
                    <label for="bloodSugarValue">Blood Sugar (mg/dL)</label>
                    <input type="number" id="bloodSugarValue" min="0" max="500" step="0.1" placeholder="e.g., 95">
                </div>

           

                <!-- Body Temperature Fields -->
                <div class="form-group" id="bodyTempField" style="display: none;">
                    <label for="bodyTempValue">Body Temperature (¬∞C)</label>
                    <input type="number" id="bodyTempValue" min="30" max="45" step="0.1" placeholder="e.g., 36.5">
                </div>

                            

                <!-- Heart Rate Fields -->
                <div class="form-group" id="heartRateField" style="display: none;">
                    <label for="heartRateValue">Heart Rate (bpm)</label>
                    <input type="number" id="heartRateValue" min="0" max="250" placeholder="e.g., 75">
                </div>

                   

                <button type="submit" class="btn-primary">Save Data</button>
            </form>
        </div>
    </div>

    <!-- Floating AI Chat Button -->
    <button class="floating-chat-btn" onclick="window.location.href='chat.html'">
        <span class="chat-icon">üí¨</span>
    </button>

    <!-- Floating Footer Navigation -->
    <footer class="floating-footer">
        <button class="footer-btn" onclick="window.location.href='home.html'">
            <span class="footer-icon">üè†</span>
            <span class="footer-label">Home</span>
        </button>
        <button class="footer-btn" onclick="window.location.href='goal.html'">
            <span class="footer-icon">üéØ</span>
            <span class="footer-label">Goals</span>
        </button>
        <button class="footer-btn" onclick="window.location.href='medicine.html'">
            <span class="footer-icon">üíä</span>
            <span class="footer-label">Medicine</span>
        </button>
        <button class="footer-btn" onclick="window.location.href='chat.html'">
            <span class="footer-icon">ü§ñ</span>
            <span class="footer-label">AI Chat</span>
        </button>
        <button class="footer-btn active" onclick="window.location.href='risk.html'">
            <span class="footer-icon">üìä</span>
            <span class="footer-label">Risk</span>
        </button>
        <button class="footer-btn" id="profileBtn">
            <span class="footer-icon">üë§</span>
            <span class="footer-label">Profile</span>
        </button>
    </footer>

    <!-- Profile Modal -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <span class="close" id="closeProfile">&times;</span>
            <h2>Profile</h2>
            <div class="profile-section">
                <div class="profile-pic-container">
                    <img id="profilePicDisplay" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100'><circle cx='50' cy='50' r='50' fill='%23667eea'/><text x='50' y='60' font-size='40' fill='white' text-anchor='middle'>üë§</text></svg>" alt="Profile">
                    <label for="profilePicInput" class="upload-btn">Change Photo</label>
                    <input type="file" id="profilePicInput" accept="image/*" style="display: none;">
                </div>
                <div class="profile-info">
                    <div class="info-item">
                        <label>Name:</label>
                        <input type="text" id="profileName" class="profile-input">
                    </div>
                    <div class="info-item">
                        <label>Age:</label>
                        <input type="number" id="profileAge" class="profile-input" min="0" max="100">
                    </div>
                    <div class="info-item">
                        <label>Email:</label>
                        <input type="email" id="profileEmail" class="profile-input" disabled>
                    </div>
                    <div class="info-item">
                        <label>Current Trimester:</label>
                        <select id="profileTrimester" class="profile-input">
                            <option value="1">First Trimester (1-12 weeks)</option>
                            <option value="2">Second Trimester (13-26 weeks)</option>
                            <option value="3">Third Trimester (27-40 weeks)</option>
                        </select>
                    </div>
                   
                </div>
            </div>
            <div class="profile-actions">
                <button class="btn-primary" id="saveProfileBtn">Save Changes</button>
                <button class="btn-danger" id="deleteAccountBtn">Delete Account</button>
                <button class="btn-secondary" id="logoutBtn">Logout</button>
            </div>
        </div>
    </div>

    <div class="blur-overlay" id="blurOverlay"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="scripts/common.js"></script>
    <script src="scripts/risk.js"></script>
</body>
</html>
